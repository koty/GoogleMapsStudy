<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" ng-app="albus">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <title>長野市バス検索</title>
    <link rel="stylesheet" href="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.1/css/bootstrap-combined.min.css" />
    <link rel="stylesheet" href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.10.1/themes/ui-lightness/jquery-ui.css" />
    <link rel="stylesheet" href="Scripts/angular-ui/angular-ui.min.css" />
    <style>
        body {
            padding:0.5em;
            font-size: 10px;
        }
        span.label {
            width: 6em;
            text-align: right;
            margin: 0.4em;
            font-size: 2em;
            line-height: 1.5em;
        }
        th, td {
            font-size: 2em;
            padding: 0.5em;
        }
    </style>

        <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
        <script src="//ajax.googleapis.com/ajax/libs/jqueryui/1.10.1/jquery-ui.min.js"></script>
        <script src="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.1/js/bootstrap.min.js"></script>
        <script src="//ajax.googleapis.com/ajax/libs/angularjs/1.1.3/angular.min.js"></script>
        <script src="//maps.google.com/maps/api/js?sensor=true"></script>
        <script src="Scripts/angular-ui/angular-ui.min.js"></script>
        <script src="Scripts/app.js"></script>
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-10735698-2']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
</head>
    <body data-ng-controller="app.searchBusByFromTo">
        <div class="container">
            <div class="row">
                <div class="span8">
                    <p style="font-size:1.4em;">
                        バス検索apiを利用させていただいています。<a href="http://www9264ui.sakura.ne.jp/yummy/?page_id=5" target="_blank">api仕様</a>
                    </p>
                    <p style="font-size:1.4em;">
                        <a href="https://play.google.com/store/apps/details?id=com.rhomobile.albus" target="_blank">本家のページ</a>
                    </p>
                    <p style="font-size:1.4em;">
                        この画面の作者：<a href="http://twitter.com/koty">@koty</a>/<a href="https://github.com/koty/GoogleMapsStudy" target="_blank">ソース</a>
                    </p>
                    <p>
                        <span class="label">出発バス停：</span><input style="font-size: 2em;height:1.4em;line-height: 1.4em;" type="text" id="id_fromBusStop" placeholder="出発バス停" data-ng-model="fromBusStop" data-auto-complete data-ui-items="busstops" />
                        <span class="label">履歴：</span>
                        <select style="width:10em;" data-ng-change="historiesDDLChanged(selectedHistory)" data-ng-model="selectedHistory" data-ng-options="i.val for i in searchHistories"></select>
                    </p>
                    <p>
                        <span class="label">到着バス停：</span><input style="font-size: 2em;height:1.4em;line-height: 1.4em;" type="text" id="id_toBusStop" placeholder="到着バス停" data-ng-model="toBusStop" data-auto-complete data-ui-items="busstops" />
                        <button style="height: 2em;width:6em;font-size:2em;margin-left:0.4em;" data-ng-click="swapBusstop()">発着を入替</button>
                    </p>
                    <p>
                        <span class="label">出発時刻：</span><input style="font-size: 2em;height:1.4em;line-height: 1.4em;" type="text" placeholder="出発時刻" data-ng-model="startTime" maxlength="4" />
                    </p>
                    <button style="height: 2.2em;width:12.1em;font-size:2em;margin-left:0.4em;" data-ng-click="search()">検索！</button>
                    <p style="margin:1em;">
                        <span style="font-size: 1.4em;">検索結果：</span>
                    </p>
                    <table>
                        <thead><tr><th>路線</th><th>乗車時刻</th><th></th><th>降車時刻</th></tr></thead>
                        <tbody>
                            <tr data-ng-repeat="diagram in resultDiagrams">
                                <td>{{diagram.linename}}</td><td>{{diagram.from}}</td><td>→</td><td>{{diagram.to}}</td>
                            </tr>
                        </tbody>
                    </table>
                    <p>
                        <button onclick="app.searchBusByFromTo.toggleMap();">地図表示切替</button>
                    </p>
                    
                    <!-- map body -->
                    <div id="map_canvas" style="height:300px;"
                         data-ui-map="myMap" data-ui-options="mapOptions"
                         data-ui-event="{'map-click': 'mapClick($event)'}"></div>
                    <!--for marker-->
					<div data-ng-repeat="marker in busstopMarkers" data-ui-map-marker="busstopMarkers[$index]"
						data-ui-event="{'map-click': 'openMarkerInfo(marker)'}">
					</div>
                    <!--infowindow-->
					<div data-ui-map-info-window="busstopInfoWindow">
					    <h1>{{currentMarker.title}}</h1>
						<button data-ng-click="setFromBusStop($event)">乗車</button>
						<button data-ng-click="setToBusStop($event)">降車</button>
					</div>
         
                </div>
                <div class="span4">
                    <a class="twitter-timeline" href="https://twitter.com/albusizumi" data-widget-id="310166718955782144">Tweets by @albusizumi</a>
                    <script>!function (d, s, id) { var js, fjs = d.getElementsByTagName(s)[0]; if (!d.getElementById(id)) { js = d.createElement(s); js.id = id; js.src = "//platform.twitter.com/widgets.js"; fjs.parentNode.insertBefore(js, fjs); } }(document, "script", "twitter-wjs");</script>
                </div>
            </div>
        </div>
    </body>
</html>
