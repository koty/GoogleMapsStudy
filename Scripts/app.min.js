function isSmartPhone(){return navigator.userAgent.indexOf("iPhone")>0&&navigator.userAgent.indexOf("iPad")==-1||navigator.userAgent.indexOf("iPod")>0||navigator.userAgent.indexOf("Android")>0}isSmartPhone()&&(document.body.style.fontSize="20px"),angular.module("albus",[]).directive("autoComplete",function(){return function(n,t,i){n.$watch(i.uiItems,function(n){t.autocomplete({source:n,select:function(){setTimeout(function(){t.trigger("input")},0)}})},!0)}});var app;(function(n){var i=function(){function n(n,t){var i=this;this.showMap(n,t),n.busstops=[],t.jsonp("http://www9264ui.sakura.ne.jp/busstops/result_bts_lines?format=json&format=js&callback=JSON_CALLBACK").success(function(t){for(var i=0;i<t.busstops.length;i++)n.busstops.push(t.busstops[i].busstopname)}),n.fromBusStop="昭和通り",n.toBusStop="五分一西",n.startTime=this.getNowTime(),n.resultDiagrams=[],n.search=function(){t.jsonp("http://www9264ui.sakura.ne.jp/diagrams/result?start_busstopnm="+encodeURIComponent(n.fromBusStop)+"&arrival_busstopnm="+encodeURIComponent(n.toBusStop)+"&departure_datetime="+i.getNowDate()+n.startTime+"&format=js&callback=JSON_CALLBACK").success(function(r){var e,u,f;n.resultDiagrams=[],e=r.diagrams[1].diagram.linename+" "+r.diagrams[0].diagram.avltime+" ⇒ "+r.diagrams[1].diagram.avltime,n.resultDiagrams.push(e),u=parseInt(r.diagrams[0].diagram.avltime,10)+1,f="",f=u<1e3?"0"+u:u.toString(),t.jsonp("http://www9264ui.sakura.ne.jp/diagrams/result?start_busstopnm="+encodeURIComponent(n.fromBusStop)+"&arrival_busstopnm="+encodeURIComponent(n.toBusStop)+"&departure_datetime="+i.getNowDate()+f+"&format=js&callback=JSON_CALLBACK").success(function(t){var i=t.diagrams[1].diagram.linename+" "+t.diagrams[0].diagram.avltime+" ⇒ "+t.diagrams[1].diagram.avltime;n.resultDiagrams.push(i)}).error(function(n){console.log("fail"),console.log(n)})}).error(function(n){console.log("fail"),console.log(n)})}}return n.prototype.getNowTime=function(){var i=new Date,n="",r=i.getHours(),t;return r<10&&(n+="0"),n+=r.toString(),t=i.getMinutes(),t<10&&(n+="0"),n+t.toString()},n.prototype.getNowDate=function(){var t=new Date,n="",u=t.getFullYear(),i,r;return n+=u.toString(),i=t.getMonth(),i<10&&(n+="0"),n+=i.toString(),r=t.getMonth(),r<10&&(n+="0"),n+r.toString()},n.prototype.showMap=function(){var n=this,i=navigator.geolocation.watchPosition(function(t){var i=new google.maps.LatLng(t.coords.latitude,t.coords.longitude);n.map.setCenter(i),n.currentPosMarker||(n.currentPosMarker=new google.maps.Marker({map:n.map,title:"現在地",icon:"Images/male.png"})),n.currentPosMarker.setPosition(i)},function(n){switch(n.code){case 1:alert("位置情報の利用が許可されていません");break;case 2:alert("デバイスの位置が判定できません");break;case 3:alert("タイムアウトしました")}},{enableHighAccuracy:!0}),t={zoom:15,mapTypeId:google.maps.MapTypeId.ROADMAP};this.map=new google.maps.Map(document.getElementById("map_canvas"),t)},n}(),t;n.searchBusByFromTo=i,t=function(){function n(){}return n.initialize=function(){function h(n){var t=document.getElementById("contentWindow");t.innerHTML=n}var u=new google.maps.LatLng(35.630442,139.882951),f={zoom:15,center:u,mapTypeId:google.maps.MapTypeId.ROADMAP},n=new google.maps.Map(document.getElementById("map_canvas"),f),e=new google.maps.LatLng(35.632605,139.88132),i=new google.maps.Marker({position:e,map:n,title:"デズニーランド（行ったことない）"}),o=new google.maps.LatLng(35.625663,139.884238),c=new google.maps.Marker({position:o,map:n,title:"デズニーシー（行ったことない）"}),s=new google.maps.InfoWindow({content:"吹き出しを設置してみました。<\/br>×ボタンで閉じてもマーカーをクリックすればまた開きます。"}),r,t;google.maps.event.addListener(i,"click",function(){s.open(n,i)}),r="https://maps.google.co.jp/maps/ms?hl=ja&ie=UTF8&brcurrent=3,0x601d805de6344499:0xf128a974072892c8,0&source=embed&authuser=0&msa=0&output=kml&msid=212296178296913481694.00049901c136c56005a6e",t=new google.maps.KmlLayer(r),t.setMap(n),google.maps.event.addListener(t,"click",function(n){var t=n.featureData.description;h(t)})},n}(),n.s=t})(app||(app={}))